version: "3"

struct Msg {
    field1 @0: u8,
}

service SensorService @0 {
    method Ping(Msg) @0 returns Msg,
}

device ecu {
    protocol can {
        impl Msg { id: 0x010; }
        rpc { request_id: 0x401; response_id: 0x402; }
        services: [SensorService];
    }

    protocol tcp {
        impl Msg as MsgTcp { tag: 0x20; }
        rpc { port: 5000; request_tag: 0x01; response_tag: 0x02; }
    }
}
